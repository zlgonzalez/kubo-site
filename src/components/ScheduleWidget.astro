---
import { getCollection } from 'astro:content';
// Since we are just reading a CSV file directly, we can use standard import if configured or fs
// But standard import for csv in Vite/Astro usually requires setup or ?raw
// Let's use fs for simplicity in Astro server-side component
import fs from 'node:fs';
import path from 'node:path';
import { parse } from 'csv-parse/sync';

interface Props {
  file: string;
}

const { file } = Astro.props;
const schedulePath = path.join(process.cwd(), 'src/data', file);
const fileContent = fs.readFileSync(schedulePath, 'utf-8');

const records = parse(fileContent, {
  columns: true,
  skip_empty_lines: true
});

interface ScheduleItem {
  Time: string;
  Activity: string;
}

const schedule: ScheduleItem[] = records;
---

<div class="bg-white rounded-lg shadow-lg overflow-hidden border border-gray-100">
  <div class="bg-primary px-6 py-4">
    <h3 class="text-white text-xl font-bold flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      Daily Schedule
    </h3>
  </div>
  <div class="divide-y divide-gray-100">
    {schedule.map((item, index) => (
      <div class={`flex flex-col sm:flex-row px-6 py-4 hover:bg-gray-50 transition-colors ${index % 2 === 0 ? 'bg-white' : 'bg-gray-50/50'}`}>
        <div class="sm:w-1/3 font-bold text-primary mb-1 sm:mb-0">
          {item.Time}
        </div>
        <div class="sm:w-2/3 text-gray-700">
          {item.Activity}
        </div>
      </div>
    ))}
  </div>
  <div class="bg-gray-50 px-6 py-3 text-xs text-gray-500 text-center italic">
    * Schedule is subject to change based on weather and children's needs.
  </div>
</div>
